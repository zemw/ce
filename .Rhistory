geom_area(position = position_stack()) +
scale_y_continuous(labels = label_number_si()) +
labs(caption = "Sum of trailing 12 months") +
theme(aspect.ratio = 1) +
ggtitle("Bond issuance")
P2<-data %>%
select(Date, contains("Bond Outstanding: PBC:")) %>%
tail(last_five_years) %>%
pivot_longer(!Date) %>%
mutate(label=shorten_name(name)) %>%
ggplot(aes(Date,value,fill=label)) +
geom_area(position = position_stack()) +
scale_y_continuous(labels = label_number_si()) +
ggtitle("Bond outstanding")
P1 + P2
P1<-data %>%
select(Date, contains("Bond Issuance: PBC:")) %>%
tail(last_five_years) %>%
pivot_longer(!Date) %>%
mutate(label=shorten_name(name)) %>%
ggplot(aes(Date,value,fill=label)) +
geom_area(position = position_stack()) +
scale_y_continuous(labels = label_number_si()) +
labs(caption = "Sum of trailing 12 months") +
theme(aspect.ratio = .8) +
ggtitle("Bond issuance")
P2<-data %>%
select(Date, contains("Bond Outstanding: PBC:")) %>%
tail(last_five_years) %>%
pivot_longer(!Date) %>%
mutate(label=shorten_name(name)) %>%
ggplot(aes(Date,value,fill=label)) +
geom_area(position = position_stack()) +
scale_y_continuous(labels = label_number_si()) +
ggtitle("Bond outstanding")
P1 + P2
P1<-data %>%
select(Date, contains("Bond Issuance: PBC:")) %>%
tail(last_five_years) %>%
pivot_longer(!Date) %>%
mutate(label=shorten_name(name)) %>%
ggplot(aes(Date,value,fill=label)) +
geom_area(position = position_stack()) +
scale_y_continuous(labels = label_number_si()) +
labs(caption = "Sum of trailing 12 months") +
theme(aspect.ratio = .8) +
ggtitle("Bond issuance")
P2<-data %>%
select(Date, contains("Bond Outstanding: PBC:")) %>%
tail(last_five_years) %>%
pivot_longer(!Date) %>%
mutate(label=shorten_name(name)) %>%
ggplot(aes(Date,value,fill=label)) +
geom_area(position = position_stack()) +
scale_y_continuous(labels = label_number_si()) +
theme(aspect.ratio = .8) +
ggtitle("Bond outstanding")
P1 + P2
P1<-data %>%
select(Date, contains("Bond Issuance: PBC:")) %>%
tail(last_five_years) %>%
pivot_longer(!Date) %>%
mutate(label=shorten_name(name)) %>%
ggplot(aes(Date,value,fill=label)) +
geom_area(position = position_stack()) +
scale_y_continuous(labels = label_number_si()) +
labs(caption = "Sum of trailing 12 months") +
theme(aspect.ratio = .8) +
ggtitle("Bond issuance")
P2<-data %>%
select(Date, contains("Bond Outstanding: PBC:")) %>%
tail(last_five_years) %>%
pivot_longer(!Date) %>%
mutate(label=shorten_name(name)) %>%
ggplot(aes(Date,value,fill=label)) +
geom_area(position = position_stack()) +
scale_y_continuous(labels = label_number_si()) +
theme(aspect.ratio = .8, legend.position = "none") +
ggtitle("Bond outstanding")
P1 + P2
P1<-data %>%
select(Date, contains("Bond Issuance: PBC:")) %>%
tail(last_five_years) %>%
pivot_longer(!Date) %>%
mutate(label=shorten_name(name)) %>%
ggplot(aes(Date,value,fill=label)) +
geom_area(position = position_stack()) +
scale_y_continuous(labels = label_number_si()) +
labs(caption = "Sum of trailing 12 months") +
theme(aspect.ratio = .8, legend.position = "none") +
ggtitle("Bond issuance")
P2<-data %>%
select(Date, contains("Bond Outstanding: PBC:")) %>%
tail(last_five_years) %>%
pivot_longer(!Date) %>%
mutate(label=shorten_name(name)) %>%
ggplot(aes(Date,value,fill=label)) +
geom_area(position = position_stack()) +
scale_y_continuous(labels = label_number_si()) +
ggtitle("Bond outstanding")
P1 + P2
P1<-data %>%
select(Date, contains("Bond Issuance: PBC:")) %>%
tail(last_five_years) %>%
pivot_longer(!Date) %>%
mutate(label=shorten_name(name)) %>%
ggplot(aes(Date,value,fill=label)) +
geom_area(position = position_stack()) +
scale_y_continuous(labels = label_number_si()) +
labs(caption = "Sum of trailing 12 months") +
theme(aspect.ratio = .8, legend.position = "none") +
ggtitle("Bond issuance")
P2<-data %>%
select(Date, contains("Bond Outstanding: PBC:")) %>%
tail(last_five_years) %>%
pivot_longer(!Date) %>%
mutate(value=value * 1e^6) %>%
P1<-data %>%
select(Date, contains("Bond Issuance: PBC:")) %>%
tail(last_five_years) %>%
pivot_longer(!Date) %>%
mutate(label=shorten_name(name)) %>%
ggplot(aes(Date,value,fill=label)) +
geom_area(position = position_stack()) +
scale_y_continuous(labels = label_number_si()) +
labs(caption = "Sum of trailing 12 months") +
theme(aspect.ratio = .8, legend.position = "none") +
ggtitle("Bond issuance")
P2<-data %>%
select(Date, contains("Bond Outstanding: PBC:")) %>%
tail(last_five_years) %>%
pivot_longer(!Date) %>%
mutate(value=value * 10^6) %>%
mutate(label=shorten_name(name)) %>%
ggplot(aes(Date,value,fill=label)) +
geom_area(position = position_stack()) +
scale_y_continuous(labels = label_number_si()) +
ggtitle("Bond outstanding")
P1 + P2
P1<-data %>%
select(Date, contains("Bond Issuance: PBC:")) %>%
tail(last_five_years) %>%
pivot_longer(!Date) %>%
mutate(value=value * 10^6) %>%
mutate(label=shorten_name(name)) %>%
ggplot(aes(Date,value,fill=label)) +
geom_area(position = position_stack()) +
scale_y_continuous(labels = label_number_si()) +
labs(caption = "Sum of trailing 12 months") +
theme(aspect.ratio = .8, legend.position = "none") +
ggtitle("Bond issuance")
P2<-data %>%
select(Date, contains("Bond Outstanding: PBC:")) %>%
tail(last_five_years) %>%
pivot_longer(!Date) %>%
mutate(value=value * 10^6) %>%
mutate(label=shorten_name(name)) %>%
ggplot(aes(Date,value,fill=label)) +
geom_area(position = position_stack()) +
scale_y_continuous(labels = label_number_si()) +
ggtitle("Bond outstanding")
P1 + P2
data %>%
select(Date, `CN: Employment: Rural`, `CN: Employment: Urban`) %>%
pivot_longer(!Date) %>%
ggplot(aes(Date, value, fill=name)) +
geom_area(position = position_stack())
data %>%
select(Date, `CN: Employment: Rural`, `CN: Employment: Urban`) %>%
drop_na() %>%
pivot_longer(!Date) %>%
ggplot(aes(Date, value, fill=name)) +
geom_area(position = position_stack())
data <- ceic$fetch_all()
ceic <- ceic_load("data.m")
source("ceic.R")
ceic <- ceic_load("data.m")
data <- ceic$fetch_all()
data %>%
select(Date, `CN: Employment: Rural`, `CN: Employment: Urban`) %>%
drop_na() %>%
pivot_longer(!Date) %>%
ggplot(aes(Date, value, fill=name)) +
geom_area(position = position_stack())
data %>%
select(Date, `CN: Employment: Rural`, `CN: Employment: Urban`) %>%
drop_na() %>%
pivot_longer(!Date) %>%
mutate(value = value*10^6) %>%
ggplot(aes(Date, value, fill=name)) +
geom_area(position = position_stack()) +
scale_y_continuous(labels = label_number_si())
data %>%
select(Date, `CN: Employment: Rural`, `CN: Employment: Urban`) %>%
drop_na() %>%
pivot_longer(!Date) %>%
mutate(value = value*10^6) %>%
ggplot(aes(Date, value, fill=name)) +
geom_area(position = position_stack()) +
scale_y_continuous(labels = label_number_si())
data %>%
select(Date,
`CN: Employment: Primary Industry`,
`CN: Employment: Secondary Industry`,
`CN: Employment: Tertiary Industry`) %>%
drop_na() %>%
pivot_longer(!Date) %>%
mutate(value = value*10^6) %>%
ggplot(aes(Date, value, fill=name)) +
geom_area(position = position_stack()) +
scale_y_continuous(labels = label_number_si())
data %>%
select(Date, `CN: Employment: Rural`, `CN: Employment: Urban`) %>%
drop_na() %>%
pivot_longer(!Date) %>%
mutate(value = value*10^6) %>%
mutate(label = shorten_name(name)) %>%
ggplot(aes(Date, value, fill=label)) +
geom_area(position = position_stack()) +
scale_y_continuous(labels = label_number_si())
data %>%
select(Date,
`CN: Employment: Primary Industry`,
`CN: Employment: Secondary Industry`,
`CN: Employment: Tertiary Industry`) %>%
drop_na() %>%
pivot_longer(!Date) %>%
mutate(value = value*10^6) %>%
ggplot(aes(Date, value, fill=name)) +
geom_area(position = position_stack()) +
scale_y_continuous(labels = label_number_si())
data %>%
select(Date, `CN: Employment: Rural`, `CN: Employment: Urban`) %>%
drop_na() %>%
pivot_longer(!Date) %>%
mutate(value = value*10^6) %>%
mutate(label = shorten_name(name)) %>%
ggplot(aes(Date, value, fill=label)) +
geom_area(position = position_stack()) +
scale_y_continuous(labels = label_number_si())
data %>%
select(Date,
`CN: Employment: Primary Industry`,
`CN: Employment: Secondary Industry`,
`CN: Employment: Tertiary Industry`) %>%
drop_na() %>%
pivot_longer(!Date) %>%
mutate(value = value*10^6) %>%
mutate(label = shorten_name(name)) %>%
ggplot(aes(Date, value, fill=label)) +
geom_area(position = position_stack()) +
scale_y_continuous(labels = label_number_si())
P1<-data %>%
select(Date, `CN: Employment: Rural`, `CN: Employment: Urban`) %>%
drop_na() %>%
pivot_longer(!Date) %>%
mutate(value = value*10^6) %>%
mutate(label = shorten_name(name)) %>%
ggplot(aes(Date, value, fill=label)) +
geom_area(position = position_stack()) +
scale_y_continuous(labels = label_number_si())
P2<-data %>%
select(Date,
`CN: Employment: Primary Industry`,
`CN: Employment: Secondary Industry`,
`CN: Employment: Tertiary Industry`) %>%
drop_na() %>%
pivot_longer(!Date) %>%
mutate(value = value*10^6) %>%
mutate(label = shorten_name(name)) %>%
ggplot(aes(Date, value, fill=label)) +
geom_area(position = position_stack()) +
scale_y_continuous(labels = label_number_si())
P1 + P2
P1<-data %>%
select(Date, `CN: Employment: Rural`, `CN: Employment: Urban`) %>%
drop_na() %>%
pivot_longer(!Date) %>%
mutate(value = value*10^6) %>%
mutate(label = shorten_name(name)) %>%
ggplot(aes(Date, value, fill=label)) +
geom_area(position = position_stack()) +
scale_y_continuous(labels = label_number_si()) +
theme(aspect.ratio = .8)
P2<-data %>%
select(Date,
`CN: Employment: Primary Industry`,
`CN: Employment: Secondary Industry`,
`CN: Employment: Tertiary Industry`) %>%
drop_na() %>%
pivot_longer(!Date) %>%
mutate(value = value*10^6) %>%
mutate(label = shorten_name(name)) %>%
ggplot(aes(Date, value, fill=label)) +
geom_area(position = position_stack()) +
scale_y_continuous(labels = label_number_si())
P1 + P2
source("ceic.R")
ceic <- ceic_load("data.m")
data <- ceic$fetch_all()
saveRDS(data, "data.Rda")
data %>%
select(Date, contains("Employee: Urban Non-private:")) %>%
drop_na() %>%
pivot_longer(!Date) %>%
mutate(label=shorten_name(name)) %>%
ggplot(aes(Date,value,fill=label)) +
geom_area(position = position_stack()) +
scale_y_continuous(labels = label_number_si())
data %>%
select(Date, contains("Employee: Urban Non-private:")) %>%
drop_na() %>%
pivot_longer(!Date) %>%
mutate(value = value * 10^6) %>%
mutate(label = shorten_name(name)) %>%
ggplot(aes(Date,value,fill=label)) +
geom_area(position = position_stack()) +
scale_y_continuous(labels = label_number_si())
data %>%
select(Date, contains("Employee: Urban Non-private:")) %>%
drop_na() %>%
pivot_longer(!Date) %>%
mutate(value = value * 10^6) %>%
mutate(label = shorten_name(name)) %>%
ggplot(aes(Date,value,fill=label)) +
geom_area(position = position_stack()) +
scale_y_continuous(labels = label_number_si()) +
theme(legend.position = "right")
data %>%
select(Date, contains("Employee: Urban Non-private:")) %>%
drop_na() %>%
pivot_longer(!Date) %>%
mutate(value = value * 10^6) %>%
mutate(label = shorten_name(name)) %>%
ggplot(aes(Date,value,fill=label)) +
geom_area(position = position_stack()) +
scale_y_continuous(labels = label_number_si()) +
theme(legend.position = "right", legend.key.width = 5)
data %>%
select(Date, contains("Employee: Urban Non-private:")) %>%
drop_na() %>%
pivot_longer(!Date) %>%
mutate(value = value * 10^6) %>%
mutate(label = shorten_name(name)) %>%
ggplot(aes(Date,value,fill=label)) +
geom_area(position = position_stack()) +
scale_y_continuous(labels = label_number_si()) +
theme(legend.position = "right", legend.key.width = unit(2, "cm"))
data %>%
select(Date, contains("Employee: Urban Non-private:")) %>%
drop_na() %>%
pivot_longer(!Date) %>%
mutate(value = value * 10^6) %>%
mutate(label = shorten_name(name)) %>%
ggplot(aes(Date,value,fill=label)) +
geom_area(position = position_stack()) +
scale_y_continuous(labels = label_number_si()) +
theme(legend.position = "right")
?str_trunc
data %>%
select(Date, contains("Employee: Urban Non-private:")) %>%
drop_na() %>%
pivot_longer(!Date) %>%
mutate(value = value * 10^6) %>%
mutate(label = shorten_name(name) %>% str_trunc(20)) %>%
ggplot(aes(Date,value,fill=label)) +
geom_area(position = position_stack()) +
scale_y_continuous(labels = label_number_si()) +
theme(legend.position = "right")
data %>%
select(Date, contains("Employee: Urban Non-private:")) %>%
drop_na() %>%
pivot_longer(!Date) %>%
mutate(value = value * 10^6) %>%
mutate(label = shorten_name(name) %>% str_trunc(30)) %>%
ggplot(aes(Date,value,fill=label)) +
geom_area(position = position_stack()) +
scale_y_continuous(labels = label_number_si()) +
theme(legend.position = "right")
data %>%
select(Date, contains("Employee: Urban Non-private:")) %>%
drop_na() %>%
pivot_longer(!Date) %>%
mutate(value = value * 10^6) %>%
mutate(label = shorten_name(name) %>% str_trunc(28)) %>%
ggplot(aes(Date,value,fill=label)) +
geom_area(position = position_stack()) +
scale_y_continuous(labels = label_number_si()) +
theme(legend.position = "right")
data %>%
select(Date, contains("Employee: Private & Individual:")) %>%
drop_na() %>%
pivot_longer(!Date) %>%
mutate(value = value * 10^6) %>%
mutate(label = shorten_name(name) %>% str_trunc(28)) %>%
ggplot(aes(Date,value,fill=label)) +
geom_area(position = position_stack()) +
scale_y_continuous(labels = label_number_si()) +
theme(legend.position = "right")
data %>%
select(Date, contains("Employee: Private & Individual:"))
data %>%
select(Date, contains("Employee: Private & Individual:")) %>%
drop_na() %>%
pivot_longer(!Date) %>%
mutate(value = value * 10^6) %>%
mutate(label = shorten_name(name)) %>%
ggplot(aes(Date,value,fill=label)) +
geom_area(position = position_stack()) +
scale_y_continuous(labels = label_number_si()) +
theme(legend.position = "right")
data %>%
select(Date, contains("Employee: Private & Individual:")) %>%
drop_na() %>%
pivot_longer(!Date) %>%
mutate(value = value * 10^6) %>%
mutate(label = shorten_name(name)) %>%
ggplot(aes(Date,value,fill=name)) +
geom_area(position = position_stack()) +
scale_y_continuous(labels = label_number_si()) +
theme(legend.position = "right")
data %>%
select(Date, contains("Employee: Private & Individual:")) %>%
drop_na()
data %>%
select(Date, contains("Employee: Private & Individual:"))
data %>%
select(Date, contains("Employee: Private & Individual:")) %>%
tail(last_ten_years) %>%
fill(!Date, .direction = "downup") %>%
pivot_longer(!Date) %>%
mutate(value = value * 10^6) %>%
mutate(label = shorten_name(name)) %>%
ggplot(aes(Date,value,fill=label)) +
geom_area(position = position_stack()) +
scale_y_continuous(labels = label_number_si()) +
theme(legend.position = "right")
13%3
13 /3
13%%3
12%%3
data %>%
select(Date, contains("Employee: Private & Individual:")) %>%
tail(last_ten_years) %>%
filter(month(Date) %% 3 == 0) %>%
fill(!Date, .direction = "downup") %>%
pivot_longer(!Date) %>%
mutate(value = value * 10^6) %>%
mutate(label = shorten_name(name)) %>%
ggplot(aes(Date,value,fill=label)) +
geom_area(position = position_stack()) +
scale_y_continuous(labels = label_number_si()) +
theme(legend.position = "right")
data %>%
select(Date, contains("Employee: Private & Individual:")) %>%
tail(last_ten_years) %>%
filter(month(Date) %% 3 == 0)
data %>%
select(Date, contains("Employee: Private & Individual:")) %>%
tail(last_ten_years) %>%
fill(!Date, .direction = "downup") %>%
pivot_longer(!Date) %>%
mutate(value = value * 10^6) %>%
mutate(label = shorten_name(name)) %>%
ggplot(aes(Date,value,fill=label)) +
geom_area(position = position_stack()) +
scale_y_continuous(labels = label_number_si()) +
theme(legend.position = "right")
data %>%
select(Date, contains("Employee: Private & Individual:")) %>%
tail(last_ten_years) %>%
fill(!Date, .direction = "downup")
data %>%
select(Date, contains("Employee: Private & Individual:")) %>%
fill(!Date, .direction = "downup") %>%
pivot_longer(!Date) %>%
mutate(value = value * 10^6) %>%
mutate(label = shorten_name(name)) %>%
ggplot(aes(Date,value,fill=label)) +
geom_area(position = position_stack()) +
scale_y_continuous(labels = label_number_si()) +
theme(legend.position = "right")
data %>%
select(Date, contains("Employee: Private & Individual:")) %>%
tail(last_ten_years) %>%
fill(!Date, .direction = "downup") %>%
pivot_longer(!Date) %>%
mutate(value = value * 10^6) %>%
mutate(label = shorten_name(name)) %>%
ggplot(aes(Date,value,fill=label)) +
geom_area(position = position_stack()) +
scale_y_continuous(labels = label_number_si()) +
theme(legend.position = "right")
?summarise
data %>%
select(Date, contains("Employee: Private & Individual:")) %>% View
data %>%
select(Date, contains("Employee: Private & Individual:")) %>%
filter(!is.na(`CN: No of Employee: Private & Individual: Manufacturing`)) %>% View
data %>%
select(Date, contains("Employee: Private & Individual:")) %>%
filter(!is.na(`CN: No of Employee: Private & Individual: Wholesale & Retail Trade`)) %>% View
data %>%
select(Date, contains("Employee: Private & Individual:")) %>%
filter(!is.na(`CN: No of Employee: Private & Individual: Wholesale & Retail Trade`)) %>%
pivot_longer(!Date) %>%
mutate(value = value * 10^6) %>%
mutate(label = shorten_name(name)) %>%
ggplot(aes(Date,value,fill=label)) +
geom_area(position = position_stack()) +
scale_y_continuous(labels = label_number_si()) +
theme(legend.position = "right")
